\documentclass[12pt]{report}

% --- Idioma y codificación ---
\usepackage[spanish]{babel}
\usepackage[utf8]{inputenc}

% --- Matemáticas ---
\usepackage{amsmath, amssymb, amsthm}

% --- Gráficos y figuras ---
\usepackage{graphics, graphicx, subfigure}
\usepackage{tikz, pgffor, ifthen}

% --- Tablas y estructuras ---
\usepackage{array, multicol, longtable, booktabs}

% --- Listas y enumeraciones ---
\usepackage{enumerate, enumitem}

% --- Márgenes y geometría ---
\usepackage[a4paper, margin=1.5cm]{geometry}

% --- Diseño y marco ---
\usepackage[framemethod=TikZ]{mdframed}

% --- Texto y contenido de prueba ---
\usepackage{lipsum}

\usepackage{subfiles}

% --- Hipervínculos ---
\usepackage{hyperref}
\hypersetup{
    colorlinks=true,
    linkcolor=black,
    filecolor=magenta,
    urlcolor=cyan
}

% --- Código fuente (listings) ---
\usepackage{listings}
\usepackage{xcolor}

\lstdefinelanguage{json}{
    basicstyle=\ttfamily,
    numbers=left,
    numberstyle=\tiny,
    stepnumber=1,
    numbersep=5pt,
    showstringspaces=false,
    breaklines=true,
    literate=
     *{0}{{{\color{blue}0}}}{1}
      {1}{{{\color{blue}1}}}{1}
      {2}{{{\color{blue}2}}}{1}
      {3}{{{\color{blue}3}}}{1}
      {4}{{{\color{blue}4}}}{1}
      {5}{{{\color{blue}5}}}{1}
      {6}{{{\color{blue}6}}}{1}
      {7}{{{\color{blue}7}}}{1}
      {8}{{{\color{blue}8}}}{1}
      {9}{{{\color{blue}9}}}{1}
      {:}{{{\color{black}{:}}}}{1}
      {,}{{{\color{black}{,}}}}{1}
}

\definecolor{listing-background}{HTML}{F7F7F7}
\definecolor{listing-rule}{HTML}{B3B2B3}
\definecolor{listing-numbers}{HTML}{B3B2B3}
\definecolor{listing-text-color}{HTML}{000000}
\definecolor{listing-keyword}{HTML}{435489}
\definecolor{listing-keyword-2}{HTML}{1284CA}
\definecolor{listing-keyword-3}{HTML}{9137CB}
\definecolor{listing-identifier}{HTML}{435489}
\definecolor{listing-string}{HTML}{00999A}
\definecolor{listing-comment}{HTML}{8E8E8E}

\lstdefinestyle{myStyle}{
    language=C++,
    alsolanguage=scala,
    numbers=left,
    xleftmargin=2.7em,
    framexleftmargin=2.5em,
    backgroundcolor=\color{gray!15},
    basicstyle=\color{listing-text-color}\linespread{1.0}\ttfamily,
    breaklines=true,
    frameshape={RYR}{Y}{Y}{RYR},
    rulecolor=\color{black},
    tabsize=2,
    numberstyle=\color{listing-numbers}\linespread{1.0}\small\ttfamily,
    aboveskip=1.0em,
    belowskip=0.1em,
    abovecaptionskip=0em,
    belowcaptionskip=1.0em,
    keywordstyle={\color{listing-keyword}\bfseries},
    keywordstyle={[2]\color{listing-keyword-2}\bfseries},
    keywordstyle={[3]\color{listing-keyword-3}\bfseries\itshape},
    sensitive=true,
    identifierstyle=\color{listing-identifier},
    commentstyle=\color{listing-comment},
    stringstyle=\color{listing-string},
    showstringspaces=false,
    label=lst:bar,
    captionpos=b
}
\lstset{style=myStyle}

% --- Marca de agua ---
\usepackage{eso-pic}
\AddToHook{shipout/foreground}{
    \begin{tikzpicture}[remember picture,overlay]
        \node at (current page.center){
            \includegraphics[width=\paperwidth,height=\paperheight,keepaspectratio]{watermark-1.png}
        };
    \end{tikzpicture}
}

% --- Redefiniciones de encabezados de capítulo y sección ---
\makeatletter
% Capítulo (estilo original conservado)
\def\@makechapterhead#1{%
  {\parindent \z@ \raggedright
    \reset@font
    \hrule
    \vspace*{10\p@}%
    \par
    \center \LARGE \scshape \@chapapp{} \huge \thechapter
    \vspace*{10\p@}%
    \par\nobreak
    \vspace*{10\p@}%
    \par
    \vspace*{1\p@}%
    \hrule
    \vspace*{30\p@}  % Espaciado reducido
    \centering\Huge \scshape #1\par\nobreak  % Centrado y scshape
    \vskip 30\p@  % Espaciado reducido
  }}


% Sección
\renewcommand{\section}{\@startsection{section}{1}{\z@}%
  {-2.5ex \@plus -0.5ex \@minus -0.1ex}%  % Espaciado superior reducido
  {1ex \@plus 0.1ex}%                     % Espaciado inferior reducido
  {\normalfont\Large\sectionstyle}}
\newcommand{\sectionstyle}[1]{%
  \par\noindent\hrule
  \vspace{0.2ex}%   % Espaciado entre líneas reducido
  {\scshape{#1}\par}%  % Centrado perfecto y scshape
  \vspace{0.4ex}%   % Espaciado entre líneas reducido
  \hrule
}

% Subsección
\renewcommand{\subsection}{\@startsection{subsection}{2}{\z@}%
  {-2ex \@plus -0.4ex \@minus -0.1ex}%  % Espaciado superior reducido
  {0.8ex \@plus 0.1ex}%                 % Espaciado inferior reducido
  {\normalfont\large\subsectionstyle}}
\newcommand{\subsectionstyle}[1]{%
  \par\noindent\hrule
  \vspace{-0.4ex}%  % Espaciado entre líneas reducido
  {\scshape #1\par}%  % Centrado perfecto y scshape
  \vspace{0.4ex}%  % Espaciado entre líneas reducido
  \hrule
}

% Subsubsección
\renewcommand{\subsubsection}{\@startsection{subsubsection}{3}{\z@}%
  {-1.5ex \@plus -0.3ex \@minus -0.1ex}%  % Espaciado superior reducido
  {0.5ex \@plus 0.1ex}%                   % Espaciado inferior reducido
  {\normalfont\normalsize\subsubsectionstyle}}
\newcommand{\subsubsectionstyle}[1]{%
  \par\noindent\hrule
  \vspace{0.4ex}%   % Espaciado entre líneas reducido
  {\scshape #1\par}%  % Centrado perfecto y scshape
  \vspace{0.4ex}%   % Espaciado entre líneas reducido
  \hrule
}
\makeatother

% --- Entornos personalizados ---
% (aquí puedes definir tus theorems, definiciones, etc.)


% --- Entornos personalizados ---
\newtheoremstyle{largebreak}{}{ }{\normalfont}{}{\bfseries}{}{\newline}{}
\theoremstyle{largebreak}

\newmdtheoremenv[hidealllines=true,roundcorner=5pt,backgroundcolor=gray!60!red!30]{exa}{Ejemplo}[section]
\newmdtheoremenv[hidealllines=true,roundcorner=5pt,backgroundcolor=gray!50!blue!30]{obs}{Observaci\'on}[section]
\newmdtheoremenv[hidealllines=true,roundcorner=5pt,backgroundcolor=green!50!blue!30]{preg}{Pregunta}[section]
\newmdtheoremenv[hidealllines=true,roundcorner=5pt,backgroundcolor=yellow!40]{idea}{Idea}[section]
\newmdtheoremenv[rightline=false,leftline=false]{theor}{Teorema}[section]
\newmdtheoremenv[rightline=false,leftline=false]{propo}{Proposici\'on}[section]
\newmdtheoremenv[rightline=false,leftline=false]{cor}{Corolario}[section]
\newmdtheoremenv[rightline=false,leftline=false]{lema}{Lema}[section]
\newmdtheoremenv[roundcorner=5pt,backgroundcolor=gray!30,hidealllines=true]{mydef}{Definici\'on}[section]
\newmdtheoremenv[roundcorner=5pt]{excer}{Ejercicio}[section]

% --- Comandos auxiliares ---
\def\proof{\paragraph{Demostraci\'on:\\}}
\def\endproof{\hfill$\blacksquare$}
\def\sol{\paragraph{Soluci\'on:\\}}
\def\endsol{\hfill$\square$}

\newcommand\abs[1]{\ensuremath{\left|#1\right|}}
\newcommand\divides{\ensuremath{\bigm|}}
\newcommand\cf[3]{\ensuremath{#1:#2\rightarrow#3}}
\newcommand\contradiction{\ensuremath{\#_c}}
\newcommand\natint[1]{\ensuremath{\left[\big|#1\big|\right]}}

\newcounter{figcount}
\setcounter{figcount}{1}

\renewcommand{\lstlistingname}{Código}
\renewcommand{\lstlistlistingname}{Lista de \lstlistingname s}

% --- Comienzo del documento ---
\begin{document}
    \setlength{\parskip}{5pt}
    \setlength{\parindent}{12pt}
    \title{Course: IBM Data Analyst
    
    From Coursera}
    \author{Cristo Daniel Alvarado}
    \maketitle

    \tableofcontents

    \lstlistoflistings

    \newpage

    \subfile{Modules/Module 1/module1.tex}

    \subfile{Modules/Module 2/module2.tex}

\end{document}