\documentclass[12pt]{report}

% --- Idioma y codificación ---
\usepackage[english]{babel}
\usepackage[utf8]{inputenc}

% --- Matemáticas ---
\usepackage{amsmath, amssymb, amsthm}

% --- Gráficos y figuras ---
\usepackage{graphics, graphicx, subfigure}
\usepackage{tikz, pgffor, ifthen}

% --- Tablas y estructuras ---
\usepackage{array, multicol, longtable, booktabs}

% --- Listas y enumeraciones ---
\usepackage{enumerate, enumitem}

% --- Márgenes y geometría ---
\usepackage[a4paper, margin=1.5cm]{geometry}

% --- Diseño y marco ---
\usepackage[framemethod=TikZ]{mdframed}

% --- Texto y contenido de prueba ---
\usepackage{lipsum}

\usepackage{subfiles}

% --- Hipervínculos ---
\usepackage{hyperref}
\usepackage{multirow}
\usepackage{bbm}

\hypersetup{
    colorlinks=true,
    linkcolor=black,
    filecolor=magenta,
    urlcolor=cyan
}

% --- Código fuente (listings) ---
\usepackage{listings}
\usepackage{xcolor}

\definecolor{listing-background}{HTML}{F7F7F7}
\definecolor{listing-rule}{HTML}{B3B2B3}
\definecolor{listing-numbers}{HTML}{B3B2B3}
\definecolor{listing-text-color}{HTML}{000000}
\definecolor{listing-keyword}{HTML}{435489}
\definecolor{listing-keyword-2}{HTML}{1284CA}
\definecolor{listing-keyword-3}{HTML}{9137CB}
\definecolor{listing-identifier}{HTML}{435489}
\definecolor{listing-string}{HTML}{00999A}
\definecolor{listing-comment}{HTML}{8E8E8E}

\lstdefinestyle{myStyle}{
    language=Python,
    alsolanguage=C++,
    numbers=left,
    xleftmargin=2.7em,
    framexleftmargin=2.5em,
    backgroundcolor=\color{gray!15},
    basicstyle=\color{listing-text-color}\linespread{1.0}\ttfamily,
    breaklines=true,
    frameshape={RYR}{Y}{Y}{RYR},
    rulecolor=\color{black},
    tabsize=2,
    numberstyle=\color{listing-numbers}\linespread{1.0}\small\ttfamily,
    aboveskip=1.0em,
    belowskip=0.1em,
    abovecaptionskip=0em,
    belowcaptionskip=1.0em,
    keywordstyle={\color{listing-keyword}\bfseries},
    keywordstyle={[2]\color{listing-keyword-2}\bfseries},
    keywordstyle={[3]\color{listing-keyword-3}\bfseries\itshape},
    sensitive=true,
    identifierstyle=\color{listing-identifier},
    commentstyle=\color{listing-comment},
    stringstyle=\color{listing-string},
    showstringspaces=false,
    label=lst:bar,
    captionpos=b
}
\lstset{style=myStyle}

% --- Marca de agua ---
\usepackage{eso-pic}
\AddToHook{shipout/foreground}{
    \begin{tikzpicture}[remember picture,overlay]
        \node at (current page.center){
            \includegraphics[width=\paperwidth,height=\paperheight,keepaspectratio]{watermark-1.png}
        };
    \end{tikzpicture}
}

% --- Redefiniciones de encabezados de capítulo y sección ---
\makeatletter
% Capítulo (estilo original conservado)
\def\@makechapterhead#1{%
  {\parindent \z@ \raggedright
    \reset@font
    \hrule
    \vspace*{10\p@}%
    \par
    \center \LARGE \scshape \@chapapp{} \huge \thechapter
    \vspace*{10\p@}%
    \par\nobreak
    \vspace*{10\p@}%
    \par
    \vspace*{1\p@}%
    \hrule
    \vspace*{30\p@}  % Espaciado reducido
    \centering\Huge \scshape #1\par\nobreak  % Centrado y scshape
    \vskip 30\p@  % Espaciado reducido
  }}


% Sección
\renewcommand{\section}{\@startsection{section}{1}{\z@}%
  {-2.5ex \@plus -0.5ex \@minus -0.1ex}%  % Espaciado superior reducido
  {1ex \@plus 0.1ex}%                     % Espaciado inferior reducido
  {\normalfont\Large\sectionstyle}}
\newcommand{\sectionstyle}[1]{%
  \par\noindent\hrule
  \vspace{0.2ex}%   % Espaciado entre líneas reducido
  {\scshape{#1}\par}%  % Centrado perfecto y scshape
  \vspace{0.4ex}%   % Espaciado entre líneas reducido
  \hrule
}

% Subsección
\renewcommand{\subsection}{\@startsection{subsection}{2}{\z@}%
  {-2ex \@plus -0.4ex \@minus -0.1ex}%  % Espaciado superior reducido
  {0.8ex \@plus 0.1ex}%                 % Espaciado inferior reducido
  {\normalfont\large\subsectionstyle}}
\newcommand{\subsectionstyle}[1]{%
  \par\noindent\hrule
  \vspace{-0.4ex}%  % Espaciado entre líneas reducido
  {\scshape #1\par}%  % Centrado perfecto y scshape
  \vspace{0.4ex}%  % Espaciado entre líneas reducido
  \hrule
}

% Subsubsección
\renewcommand{\subsubsection}{\@startsection{subsubsection}{3}{\z@}%
  {-1.5ex \@plus -0.3ex \@minus -0.1ex}%  % Espaciado superior reducido
  {0.5ex \@plus 0.1ex}%                   % Espaciado inferior reducido
  {\normalfont\normalsize\subsubsectionstyle}}
\newcommand{\subsubsectionstyle}[1]{%
  \par\noindent\hrule
  \vspace{0.4ex}%   % Espaciado entre líneas reducido
  {\scshape #1\par}%  % Centrado perfecto y scshape
  \vspace{0.4ex}%   % Espaciado entre líneas reducido
  \hrule
}
\makeatother

% --- Entornos personalizados ---
% (aquí puedes definir tus theorems, definiciones, etc.)


% --- Entornos personalizados ---
\newtheoremstyle{largebreak}{}{ }{\normalfont}{}{\bfseries}{}{\newline}{}
\theoremstyle{largebreak}

\newmdtheoremenv[hidealllines=true,roundcorner=5pt,backgroundcolor=gray!60!red!30]{exa}{Example}[section]
\newmdtheoremenv[hidealllines=true,roundcorner=5pt,backgroundcolor=gray!50!blue!30]{obs}{Observation}[section]
\newmdtheoremenv[hidealllines=true,roundcorner=5pt,backgroundcolor=green!50!blue!30]{preg}{Question}[section]
\newmdtheoremenv[hidealllines=true,roundcorner=5pt,backgroundcolor=yellow!40]{idea}{Idea}[section]
\newmdtheoremenv[rightline=false,leftline=false]{theor}{Theorm}[section]
\newmdtheoremenv[rightline=false,leftline=false]{propo}{Proposition}[section]
\newmdtheoremenv[rightline=false,leftline=false]{cor}{Corollary}[section]
\newmdtheoremenv[rightline=false,leftline=false]{lema}{Lemma}[section]
\newmdtheoremenv[roundcorner=5pt,backgroundcolor=gray!30,hidealllines=true]{mydef}{Definition}[section]
\newmdtheoremenv[roundcorner=5pt]{excer}{Excercise}[section]

% --- Comandos auxiliares ---
\def\proof{\paragraph{Proof:\\}}
\def\endproof{\hfill$\blacksquare$}
\def\sol{\paragraph{Solution:\\}}
\def\endsol{\hfill$\square$}

\newcommand\logit[1]{\ensuremath{\textup{logit}\left(#1\right)}}
\newcommand\abs[1]{\ensuremath{\left|#1\right|}}
\newcommand\divides{\ensuremath{\bigm|}}
\newcommand\cf[3]{\ensuremath{#1:#2\rightarrow#3}}
\newcommand\contradiction{\ensuremath{\#_c}}
\newcommand\natint[1]{\ensuremath{\left[\big|#1\big|\right]}}
\newcommand\bbm[1]{\ensuremath{\mathbbm{#1}}}

\newcounter{figcount}
\setcounter{figcount}{1}

\renewcommand{\lstlistingname}{Code}
\renewcommand{\lstlistlistingname}{{\lstlistingname} List}

\setlist{  
    itemsep=0pt,      % Space between items
    parsep=0pt,       % Space between paragraphs in items
    topsep=5pt,       % Space before/after list
    partopsep=0pt     % Extra space when list starts new paragraph
}

% Or set separately for different list types
\setlist[itemize]{  
    itemsep=2pt,
    parsep=2pt,
    topsep=5pt
}

\setlist[enumerate]{  
    itemsep=2pt,
    parsep=2pt,
    topsep=5pt
}

\renewcommand*\familydefault{\sfdefault}

% --- Comienzo del documento ---
\begin{document}
    \setlength{\parskip}{5pt}
    \setlength{\parindent}{12pt}
    \title{Fundamentals of Quantitative Modeling}
    \author{Cristo Daniel Alvarado}
    \maketitle

    \tableofcontents

    \lstlistoflistings

    \subfile{Module 1/module1.tex}

    \subfile{Module 2/module2.tex}

    \appendix

    \subfile{Appendices/Appendix 1/appendix_1.tex}

    \newpage

\end{document}